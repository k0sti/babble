# Test configuration for rapid toggle edge case
#
# This test:
# 1. Rapidly starts and stops recording multiple times
# 2. Verifies no race conditions or crashes occur
# 3. Validates graceful handling of rapid state changes

[test]
name = "Rapid Toggle Edge Case"
description = "Tests rapid start/stop toggling"

# Action 1: Log start
[[actions]]
time_ms = 100
action = { type = "log", message = "Starting rapid toggle edge case test..." }

# Toggle 1: Start
[[actions]]
time_ms = 500
action = { type = "click_record" }

# Toggle 1: Stop (100ms later)
[[actions]]
time_ms = 600
action = { type = "stop_record" }

# Toggle 2: Start (100ms later)
[[actions]]
time_ms = 700
action = { type = "click_record" }

# Toggle 2: Stop (100ms later)
[[actions]]
time_ms = 800
action = { type = "stop_record" }

# Toggle 3: Start (100ms later)
[[actions]]
time_ms = 900
action = { type = "click_record" }

# Toggle 3: Stop (100ms later)
[[actions]]
time_ms = 1000
action = { type = "stop_record" }

# Action: Verify no crashes or errors after rapid toggling
[[actions]]
time_ms = 2000
action = { type = "log", message = "Verifying no crashes after rapid toggling" }
assert = { type = "no_error" }

# Exit with success
[[actions]]
time_ms = 3000
action = { type = "exit", code = 0 }
